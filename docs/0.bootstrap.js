(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "../pkg/tetris_rs.js":
/*!***************************!*\
  !*** ../pkg/tetris_rs.js ***!
  \***************************/
/*! exports provided: __wbg_drawBoard_33d89ecd16ceae75, __wbg_drawScore_ae9c23800538a33d, __wbg_drawNextStone_5171354e7d33c891, __wbg_log_8dd8b8b3cf722b6b, draw, __wbg_error_cc95a3d302735ca3, TheGame, __wbindgen_throw */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_drawBoard_33d89ecd16ceae75\", function() { return __wbg_drawBoard_33d89ecd16ceae75; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_drawScore_ae9c23800538a33d\", function() { return __wbg_drawScore_ae9c23800538a33d; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_drawNextStone_5171354e7d33c891\", function() { return __wbg_drawNextStone_5171354e7d33c891; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_log_8dd8b8b3cf722b6b\", function() { return __wbg_log_8dd8b8b3cf722b6b; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"draw\", function() { return draw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbg_error_cc95a3d302735ca3\", function() { return __wbg_error_cc95a3d302735ca3; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TheGame\", function() { return TheGame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__wbindgen_throw\", function() { return __wbindgen_throw; });\n/* harmony import */ var _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tetris_rs_bg */ \"../pkg/tetris_rs_bg.wasm\");\n/* tslint:disable */\n\n\nlet cachedTextDecoder = new TextDecoder('utf-8');\n\nlet cachegetUint8Memory = null;\nfunction getUint8Memory() {\n    if (cachegetUint8Memory === null || cachegetUint8Memory.buffer !== _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer) {\n        cachegetUint8Memory = new Uint8Array(_tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"memory\"].buffer);\n    }\n    return cachegetUint8Memory;\n}\n\nfunction getStringFromWasm(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory().subarray(ptr, ptr + len));\n}\n\nfunction __wbg_drawBoard_33d89ecd16ceae75(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    drawBoard(varg0);\n}\n\nfunction __wbg_drawScore_ae9c23800538a33d(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    drawScore(varg0);\n}\n\nfunction __wbg_drawNextStone_5171354e7d33c891(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    drawNextStone(varg0);\n}\n\nfunction __wbg_log_8dd8b8b3cf722b6b(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n    log(varg0);\n}\n/**\n* @returns {void}\n*/\nfunction draw() {\n    return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"draw\"]();\n}\n\nfunction __wbg_error_cc95a3d302735ca3(arg0, arg1) {\n    let varg0 = getStringFromWasm(arg0, arg1);\n\n    varg0 = varg0.slice();\n    _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbindgen_free\"](arg0, arg1 * 1);\n\n    console.error(varg0);\n}\n\nfunction freeTheGame(ptr) {\n\n    _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"__wbg_thegame_free\"](ptr);\n}\n/**\n*/\nclass TheGame {\n\n    static __wrap(ptr) {\n        const obj = Object.create(TheGame.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    free() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n        freeTheGame(ptr);\n    }\n\n    /**\n    * @param {number} arg0\n    * @param {number} arg1\n    * @returns {TheGame}\n    */\n    static new(arg0, arg1) {\n        return TheGame.__wrap(_tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_new\"](arg0, arg1));\n    }\n    /**\n    * turn stone\n    * @returns {void}\n    */\n    turn() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_turn\"](this.ptr);\n    }\n    /**\n    * @returns {void}\n    */\n    left() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_left\"](this.ptr);\n    }\n    /**\n    * @returns {void}\n    */\n    right() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_right\"](this.ptr);\n    }\n    /**\n    * @param {number} arg0\n    * @returns {boolean}\n    */\n    next_tick(arg0) {\n        return (_tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_next_tick\"](this.ptr, arg0)) !== 0;\n    }\n    /**\n    * draw the board\n    * @returns {void}\n    */\n    draw() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_draw\"](this.ptr);\n    }\n    /**\n    * @returns {void}\n    */\n    draw_score() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_draw_score\"](this.ptr);\n    }\n    /**\n    * @returns {void}\n    */\n    draw_next_stone() {\n        return _tetris_rs_bg__WEBPACK_IMPORTED_MODULE_0__[\"thegame_draw_next_stone\"](this.ptr);\n    }\n}\n\nfunction __wbindgen_throw(ptr, len) {\n    throw new Error(getStringFromWasm(ptr, len));\n}\n\n\n\n//# sourceURL=webpack:///../pkg/tetris_rs.js?");

/***/ }),

/***/ "../pkg/tetris_rs_bg.wasm":
/*!********************************!*\
  !*** ../pkg/tetris_rs_bg.wasm ***!
  \********************************/
/*! exports provided: memory, draw, __wbg_thegame_free, thegame_new, thegame_turn, thegame_left, thegame_right, thegame_next_tick, thegame_draw, thegame_draw_score, thegame_draw_next_stone, __wbindgen_free */
/***/ (function(module, exports, __webpack_require__) {

eval("\"use strict\";\n// Instantiate WebAssembly module\nvar wasmExports = __webpack_require__.w[module.i];\n__webpack_require__.r(exports);\n// export exports from WebAssembly module\nfor(var name in wasmExports) if(name != \"__webpack_init__\") exports[name] = wasmExports[name];\n// exec imports from WebAssembly module (for esm order)\n/* harmony import */ var m0 = __webpack_require__(/*! ./tetris_rs */ \"../pkg/tetris_rs.js\");\n\n\n// exec wasm module\nwasmExports[\"__webpack_init__\"]()\n\n//# sourceURL=webpack:///../pkg/tetris_rs_bg.wasm?");

/***/ }),

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var tetris_rs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tetris-rs */ \"../pkg/tetris_rs.js\");\n\n\nfunction $id( id ){\n    return document.getElementById(id);\n}\n\nfunction leave( id ){\n    $id( id ).blur();\n}\n\n$id(\"reset\").onclick= function(){ reset(); leave(\"reset\"); } ;\n\n$id(\"stopplay\").onclick= function(){ stopplay_pressed(); leave(\"stopplay\"); } ;\n\n$id(\"left\").onclick= function(){ inputHandler ( { keyCode: 37 } ); } ;\n$id(\"turn\").onclick= function(){ inputHandler ( { keyCode: 32 } ); } ;\n$id(\"right\").onclick= function(){ inputHandler ( { keyCode: 39 } ); } ;\n$id(\"down\").onclick= function(){ inputHandler ( { keyCode: 40 } ); } ;\n\nwindow.addEventListener('keydown',inputHandler,false);\n\nfunction inputHandler(e) {\n    //console.log( e.keyCode );\n    if( gameover )\n        return;\n    if( paused && e.keyCode != 80 ){\n        // continue game\n        stopplay_pressed();\n        return;\n    }\n    switch( e.keyCode ){\n        case 32: \n        case 38: \n            game.turn();\n            break;\n        case 37: \n            game.left();\n            break;\n        /*case 38: \n            game.draw();\n            break;*/\n        case 39: \n            game.right();\n            break;\n        case 40: \n            if( paused ) return;\n            nextTick();\n            break;\n        case 80: \n            stopplay_pressed();\n            break;\n        default:\n            break;\n    }\n}\n\nvar game;\nvar gameover;\nvar paused;\n\nfunction nextTick(){\n    if( gameover )\n        return;\n    gameover = game.next_tick( Math.random() );\n    game.draw_next_stone();\n    if( gameover ){\n        paused = true;\n    }\n}\n\nfunction reset(){\n    game = tetris_rs__WEBPACK_IMPORTED_MODULE_0__[\"TheGame\"].new( Math.random(), Math.random() );\n    game.draw();\n    game.draw_next_stone();\n    gameover = false;\n    paused = true;\n    clearTimeout(timeclk);\n}\n\nreset();\n\nvar timeclk;\n\nfunction stopplay_pressed(){\n    clearTimeout(timeclk);\n    if( paused ){\n        autoplay();\n        $id(\"pause-label\").style = \"display: none;\";\n    } else {\n        $id(\"pause-label\").style = \"display: block;\";\n    }\n    paused = !paused;\n}\n\nfunction autoplay(){\n    clearTimeout(timeclk);\n    nextTick();\n    timeclk = setTimeout( autoplay, 1000 );\n}\n\n\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);